function ret = rgb2yuv(x)


x = double(x);

R = x(:,:,1);
G = x(:,:,2);
B = x(:,:,3);

a = [0.229 0.587 0.114; -0.168 -0.331 0.5; 0.5 -0.418 -0.082];
A = [0.257 0.504 0.098; -0.148 -0.291 0.439; 0.439 -0.368 -0.071];

Y =  A(1,1)*R + A(1,2)*G + A(1,3)*B + 16;
Cb = A(2,1)*R + A(2,2)*G + A(2,3)*B + 128;
Cr = A(3,1)*R + A(3,2)*G + A(3,3)*B + 128;


ret = Y;
ret(:,:,2) = Cb;
ret(:,:,3) = Cr;
ret = ret./255;

